<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>David’s Cubicle | Let’s talk, chitchat, and grab coffee :)</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="David’s Cubicle" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let’s talk, chitchat, and grab coffee :)" />
<meta property="og:description" content="Let’s talk, chitchat, and grab coffee :)" />
<link rel="canonical" href="http://localhost:4000/Online-Movies-Store-Web-Application.html" />
<meta property="og:url" content="http://localhost:4000/Online-Movies-Store-Web-Application.html" />
<meta property="og:site_name" content="David’s Cubicle" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="David’s Cubicle" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Let’s talk, chitchat, and grab coffee :)","headline":"David’s Cubicle","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/portfolio.png"}},"url":"http://localhost:4000/Online-Movies-Store-Web-Application.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=515565967f4694da52dca2d7faaa661d52cc1f1a">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">David's Cubicle</a></h1>

        
          <img src="/assets/portfolio.png" alt="Logo" />
        

        <p>Let's talk, chitchat, and grab coffee :)</p>

        
        <p class="view"><a href="https://github.com/HCWDavid/hcwdavid.github.io">View the Project on GitHub <small>HCWDavid/hcwdavid.github.io</small></a></p>
        

        

        
      </header>
      <section>

      <p>This project is the 122B project class, called “Project in Databases and Web Applications”.</p>

<p>I also had a awesome partner who has helped me to develop this project along the way and was able to make it work!</p>

<p>This project introduces the modern data management techniques, such as database connectivity, web application development, extending database functions, database administration, and XML.</p>

<p>In addition, I have been explosed to cloud services, such as Amazon AWS and Google Cloud Platform. Launched instances on AWS to deploy the project, I was able to use my application through cloud and did some modification through it.</p>

<p>Here is a picture of my AMIs/used instances on AWS. P.S.: I have deleted my instances because of the monthly payment that I had to pay, so I created an image as a backup in case I want to have it back.
<!-- ![1 AWS](/assets/Online-Movies-Store-Web-Application/1.png) --></p>

<p><img src="/assets/Online-Movies-Store-Web-Application/1.png" alt="drawing" width="400" /></p>

<p>This is our front-end pages look like (we also implemented fuzzy search and autocomplete in the main search bar):</p>

<!-- ![2 Main Page](/assets/Online-Movies-Store-Web-Application/2.png) -->
<p><img src="/assets/Online-Movies-Store-Web-Application/2.png" alt="drawing" width="400" /></p>

<p>Of course, it is the most simple and static web page we first created:</p>

<p><img src="/assets/Online-Movies-Store-Web-Application/3.png" alt="drawing" width="400" /></p>

<p>Lastly, because it is a shopping website, there is a simple cart page to check out your products that you want to purchase!</p>

<!-- ![4 Cart Page](/assets/Online-Movies-Store-Web-Application/4.png) -->
<p><img src="/assets/Online-Movies-Store-Web-Application/4.png" alt="drawing" width="400" /></p>

<p>Databases connectivity (initialized in java backend to connect with the database):</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Resource</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"jdbc/readDB"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>
</code></pre></div></div>
<p>POST:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span><span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>
    <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>
<p>GET:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
	<span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>
</code></pre></div></div>

<p>PreparedStatement in java to prevent SQL injection (what you need to do is to set the variable with the correct type into the question mark starting index of 1):</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">q</span> <span class="o">=</span> <span class="s">"SELECT ___FROM___WHERE___?___?___"</span> <span class="o">;</span>
<span class="nc">Connection</span>  <span class="n">dbcon</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
<span class="nc">PreparedStatement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">dbcon</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
<span class="n">statement</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">somestring1</span><span class="o">);</span>
<span class="n">statement</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">somestring2</span><span class="o">);</span>
<span class="nc">ResultSet</span> <span class="n">set</span> <span class="o">=</span> <span class="n">statement</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
</code></pre></div></div>

<p>#FunPart (We also implemented ReCaptcha for checking robots as a security check):</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">URL</span> <span class="n">verifyUrl</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="no">SITE_VERIFY_URL</span><span class="o">);</span>
<span class="c1">// Open Connection to URL</span>
<span class="nc">HttpsURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpsURLConnection</span><span class="o">)</span> <span class="n">verifyUrl</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="c1">// Add Request Header</span>
<span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Mozilla/5.0"</span><span class="o">);</span>
<span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Accept-Language"</span><span class="o">,</span> <span class="s">"en-US,en;q=0.5"</span><span class="o">);</span>
<span class="c1">// Data will be sent to the server.</span>
<span class="nc">String</span> <span class="n">postParams</span> <span class="o">=</span> <span class="s">"secret="</span> <span class="o">+</span> <span class="nc">RecaptchaConstants</span><span class="o">.</span><span class="na">SECRET_KEY</span> <span class="o">+</span> <span class="s">"&amp;response="</span> <span class="o">+</span> <span class="n">gRecaptchaResponse</span><span class="o">;</span>
<span class="c1">// Send Request</span>
<span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</code></pre></div></div>

<p>Efficiency Improvement:</p>

<p>We implemented Master-slave replication servers and connection pooling to improve the speed of the web application:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span> <span class="n">web</span><span class="o">.</span><span class="na">xml</span> 
<span class="err">#</span> <span class="nc">Master</span><span class="o">/</span><span class="nc">Slave</span> <span class="n">replication</span><span class="o">,</span> <span class="n">one</span> <span class="k">for</span> <span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="o">,</span> <span class="n">one</span> <span class="k">for</span> <span class="n">read</span><span class="o">/</span><span class="n">write</span>
<span class="o">&lt;</span><span class="n">resource</span><span class="o">-</span><span class="n">ref</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="nc">MySQL</span> <span class="nc">DataSource</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">res</span><span class="o">-</span><span class="n">ref</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">jdbc</span><span class="o">/</span><span class="n">readDB</span><span class="o">&lt;/</span><span class="n">res</span><span class="o">-</span><span class="n">ref</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">res</span><span class="o">-</span><span class="n">type</span><span class="o">&gt;</span><span class="n">javax</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">DataSource</span><span class="o">&lt;/</span><span class="n">res</span><span class="o">-</span><span class="n">type</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">res</span><span class="o">-</span><span class="n">auth</span><span class="o">&gt;</span><span class="nc">Container</span><span class="o">&lt;/</span><span class="n">res</span><span class="o">-</span><span class="n">auth</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">resource</span><span class="o">-</span><span class="n">ref</span><span class="o">&gt;</span>

<span class="o">...</span>

<span class="err">#</span> <span class="n">context</span><span class="o">.</span><span class="na">xml</span>
<span class="err">#</span> <span class="n">connection</span> <span class="n">pooling</span>
<span class="o">&lt;</span><span class="nc">Resource</span> <span class="n">name</span><span class="o">=</span><span class="s">"jdbc/readDB"</span> <span class="n">auth</span><span class="o">=</span><span class="s">"Container"</span> <span class="n">type</span><span class="o">=</span><span class="s">"javax.sql.DataSource"</span>
              <span class="n">maxTotal</span><span class="o">=</span><span class="s">"100"</span> <span class="n">maxIdle</span><span class="o">=</span><span class="s">"30"</span> <span class="n">maxWaitMillis</span><span class="o">=</span><span class="s">"10000"</span> <span class="n">username</span><span class="o">=</span><span class="s">"SomeUser"</span>
              <span class="n">password</span><span class="o">=</span><span class="s">"SomePassword"</span> <span class="n">driverClassName</span><span class="o">=</span><span class="s">"someDriverClass"</span>
              <span class="n">url</span><span class="o">=</span><span class="s">"someurl?autoReconnect=true&amp;amp;useSSL=false&amp;amp;cachePrepStmts=true"</span><span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nc">Resource</span> <span class="n">name</span><span class="o">=</span><span class="s">"jdbc/writeDB"</span> <span class="n">auth</span><span class="o">=</span><span class="s">"Container"</span> <span class="n">type</span><span class="o">=</span><span class="s">"javax.sql.DataSource"</span>
            <span class="n">maxTotal</span><span class="o">=</span><span class="s">"100"</span> <span class="n">maxIdle</span><span class="o">=</span><span class="s">"30"</span> <span class="n">maxWaitMillis</span><span class="o">=</span><span class="s">"10000"</span> <span class="n">username</span><span class="o">=</span><span class="s">"SomeUser"</span>
            <span class="n">password</span><span class="o">=</span><span class="s">"SomePassword"</span> <span class="n">driverClassName</span><span class="o">=</span><span class="s">"someDriverClass"</span>
            <span class="n">url</span><span class="o">=</span><span class="s">"someurl?autoReconnect=true&amp;amp;useSSL=false&amp;amp;cachePrepStmts=true"</span><span class="o">/&gt;</span>
</code></pre></div></div>

<p>Reference:</p>
<ul>
  <li>Check out the class <a href="https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2019-winter">web page</a> on how we did this project in detail with more instructions</li>
</ul>

<p><a href="./">back</a></p>


      </section>
      <footer>
        
        <p>This project is maintained by <a href="https://github.com/HCWDavid">HCWDavid</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
  </body>
</html>
